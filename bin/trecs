#!/usr/bin/env ruby
require "trollop"

module TRecs
  class Player
    attr_reader :file_name
    attr_reader :current_time


    def initialize(opts={})
      @file_name    = opts[:file_name]
      @current_time = opts[:time]
    end

    def run
      if file_name
        if !existent_project?
          puts "File #{file_name} does not exist."
        else
          puts File.read(file_to_read)
        end
      end
    end

    private

    def existent_project?
      File.exist?(File.dirname(@file_name))
    end

    def file_to_read
      file_array = []
      file_array << File.dirname(file_name)
      file_array << "/#{current_time}_"
      file_array << File.basename(file_name)
      file_to_read = file_array.join
    end
  end
end

options = Trollop::options do
  opt :file_name, "File to process", type: String, short: 'f'
  opt :time,      "Frame at time",   type: String, short: 't', default: "0"
  opt :quiet,     "Use minimal output", short: 'q' # not used
end

player = TRecs::Player.new(options)
player.run
