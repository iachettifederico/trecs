#!/usr/bin/env ruby

$:.unshift(File.expand_path("../../lib", __FILE__))

require "trollop"

require "recorders/message_recorder"

options = Trollop::options do
  opt :file_name, "File to process",                     short: 'f', type: String
  opt :message,   "Message to record",                   short: 'm', type: String
  opt :step,      "Time between frames in milliseconds", short: 's', default: 100
end

if options[:file_name]

  recorder = Recorder.new(
    persistence_strategy: ZipFileRecorder.new(file_name: file_name),
    recording_strategy: IncrementalRecordingStrategy.new(message: message)
  recorder = TRecs::MessageRecorder.new(options)
  recorder.record
else
  puts "Please give a file name"
end
