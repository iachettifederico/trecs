#!/usr/bin/env ruby

$:.unshift(File.expand_path("../../lib", __FILE__))

require "trollop"

require "recorders/ttyrec_recorder"

options = Trollop::options do
  # opt :input_file,  "File to process", short: 'i', type: String
  opt :output_file, "Output file",     short: 'o', type: String
end

options[:input_file] ||= "/tmp/ttyrecord"

if options[:output_file] # && options[:input_file]
  puts "Recording ..."
  system "ttyrec #{options[:input_file]}"
  recorder = TRecs::TtyrecRecorder.new(options)
  recorder.record
  puts "Finish Recording ..."
else
  puts "Please give an input and an output file file name"
end
